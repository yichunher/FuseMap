Search.setIndex({"docnames": ["about", "api", "fusemap", "index", "install", "main", "modules", "tutorials"], "filenames": ["about.rst", "api.rst", "fusemap.rst", "index.rst", "install.rst", "main.rst", "modules.rst", "tutorials.rst"], "titles": ["About", "&lt;no title&gt;", "fusemap package", "Welcome to FuseMap\u2019s documentation!", "Usage", "main module", "FuseMap", "Tutorials"], "terms": {"class": 2, "flagconfig": [2, 6], "sourc": [2, 5], "base": 2, "object": 2, "align_ann": [2, 6], "10000000000": 2, "0": 2, "lambda_disc_singl": [2, 6], "1": 2, "modeltyp": [2, 6], "valu": 2, "enum": 2, "an": 2, "enumer": 2, "dis_lamda": [2, 6], "2": 2, "ep": [2, 6], "1e": 2, "10": 2, "train_without_ev": [2, 6], "use_reference_pct": [2, 6], "02": 2, "align_noise_coef": [2, 6], "5": 2, "batch_siz": [2, 6], "64": 2, "dropout_r": [2, 6], "hidden_dim": [2, 6], "512": 2, "lambda_ae_singl": [2, 6], "lambda_ae_spati": [2, 6], "lambda_disc_spati": [2, 6], "latent_dim": [2, 6], "learning_r": [2, 6], "001": 2, "lr_factor_fin": [2, 6], "lr_factor_pretrain": [2, 6], "lr_limit_fin": [2, 6], "05": 2, "lr_limit_pretrain": [2, 6], "lr_patience_fin": [2, 6], "3": 2, "lr_patience_pretrain": [2, 6], "n_epoch": [2, 6], "16": 2, "optim_kw": [2, 6], "rmsprop": 2, "patience_limit_fin": [2, 6], "patience_limit_pretrain": [2, 6], "pca_dim": [2, 6], "50": 2, "use_input": [2, 6], "norm": 2, "verbos": [2, 6], "fals": 2, "parse_input_arg": [2, 6], "customgraphdataload": [2, 6], "dataset_al": 2, "sampler": 2, "shuffl": 2, "n_atla": 2, "drop_last": 2, "customgraphdataset": [2, 6], "g": 2, "adata": 2, "useinput": 2, "mappretraindataload": [2, 6], "mappretraindataset": [2, 6], "x": 2, "construct_data": [2, 6], "input_ident": 2, "construct_mask": [2, 6], "spatial_dataset_list": 2, "g_all": 2, "get_feature_spars": [2, 6], "devic": 2, "featur": 2, "multipleheaderfilt": [2, 6], "patterns_to_filt": 2, "filter": [2, 6], "record": 2, "determin": 2, "specifi": 2, "i": [2, 7], "log": 2, "return": [2, 4], "nonzero": 2, "ye": 2, "If": 2, "deem": 2, "appropri": 2, "mai": 2, "modifi": 2, "place": 2, "setup_log": [2, 6], "save_path": 2, "none": [2, 4], "configur": 2, "file": 2, "consol": 2, "ignor": 2, "messag": 2, "pattern": 2, "paramet": [2, 4], "path": 2, "where": 2, "save": 2, "list": [2, 4], "regex": 2, "out": 2, "ae_gene_loss": [2, 6], "recon_x": 2, "z_distribut": 2, "compute_ae_loss": [2, 6], "flag_source_cat_singl": 2, "flag_source_cat_spati": 2, "anneal": 2, "batch_features_al": 2, "adj_al": 2, "mask_batch_singl": 2, "mask_batch_spati": 2, "balance_weight_single_block": 2, "balance_weight_spatial_block": 2, "compute_ae_loss_map": [2, 6], "adapt_model": 2, "pretrain_single_batch": 2, "pretrain_spatial_batch": 2, "flag_source_cat_single_pretrain": 2, "flag_source_cat_spatial_pretrain": 2, "compute_ae_loss_pretrain": [2, 6], "compute_dis_loss": [2, 6], "compute_dis_loss_map": [2, 6], "compute_dis_loss_pretrain": [2, 6], "compute_gene_embedding_loss": [2, 6], "get_balance_weight": [2, 6], "leiden_adata_singl": 2, "adatas_": 2, "key_leiden_categori": 2, "get_balance_weight_subsampl": [2, 6], "prod": [2, 6], "adj_model": [2, 6], "n": 2, "forward": [2, 6], "defin": 2, "comput": 2, "perform": 2, "everi": 2, "call": 2, "should": 2, "overridden": 2, "all": 2, "subclass": 2, "although": 2, "recip": 2, "pass": 2, "need": 2, "within": 2, "thi": 2, "function": [2, 4], "one": 2, "instanc": 2, "afterward": 2, "instead": 2, "sinc": 2, "former": 2, "take": 2, "care": 2, "run": 2, "regist": 2, "hook": 2, "while": 2, "latter": 2, "silent": 2, "them": 2, "bool": 2, "discrimin": [2, 6], "fusemapadaptdecod": [2, 6], "var_index": 2, "gene_embedding_pretrain": 2, "gene_embedding_new": 2, "z": 2, "z_spatial": 2, "adj": 2, "fusemapdecod": [2, 6], "gene_embed": 2, "fusemapencod": [2, 6], "input_dim": 2, "normal": 2, "batchnorm": 2, "fuse_network": [2, 6], "var_nam": 2, "all_unique_gen": 2, "n_ob": 2, "num_epoch": 2, "pretrain_model": [2, 6], "pretrain_n_atla": 2, "pretrained_gen": 2, "new_train_gen": 2, "use_llm_gene_embed": 2, "add_adaptdecoder_modul": [2, 6], "kei": 2, "gene_pretrain": 2, "gene_new": 2, "add_decoder_modul": [2, 6], "add_encoder_modul": [2, 6], "nntransfer": [2, 6], "128": 2, "output_dim": 2, "reset_paramet": [2, 6], "para": 2, "construct_graph": [2, 6], "kneighbor": 2, "get_allunique_gene_nam": [2, 6], "sample_gene_list": 2, "get_spatial_input": [2, 6], "get_unique_gene_indic": [2, 6], "gene_list": 2, "preprocess_adata": [2, 6], "x_input": 2, "preprocess_adj_spars": [2, 6], "preprocess_raw": [2, 6], "data_pth": 2, "arg": [2, 5], "molccf_path": 2, "save_dir": 2, "preprocess_sav": 2, "add_pretrain_to_nam": [2, 6], "": 2, "balance_weight": [2, 6], "get_data": [2, 6], "blocks_al": 2, "feature_al": 2, "train_mask": 2, "load_ref_data": [2, 6], "ref_dir": 2, "trained_x_num": 2, "load_ref_model": [2, 6], "map_model": [2, 6], "spatial_dataload": 2, "val_mask": 2, "dataloader_pretrain_singl": 2, "dataloader_pretrain_spati": 2, "read_model": [2, 6], "spatial_dataloader_test": 2, "mode": 2, "transfer_weight": [2, 6], "trained_model": 2, "pretrain_index": 2, "average_embed": [2, 6], "categori": 2, "obsm_lat": 2, "generate_ad_emb": [2, 6], "keep_label": 2, "ttype": 2, "use_kei": 2, "final": 2, "load_snapshot": [2, 6], "snapshot_path": 2, "loc": 2, "read_cell_embed": [2, 6], "keep_celltyp": 2, "keep_tissueregion": 2, "read_gene_embed": [2, 6], "read_gene_embedding_map": [2, 6], "save_obj": [2, 6], "objt": 2, "name": 2, "save_snapshot": [2, 6], "epoch_pretrain": 2, "epoch_fin": 2, "seed_al": [2, 6], "seed_valu": 2, "cuda_determinist": 2, "true": 2, "transfer_annot": [2, 6], "packag": 6, "main": 6, "modul": [3, 6], "index": 3, "search": 3, "page": 3, "submodul": 6, "config": 6, "dataset": 6, "logger": 6, "loss": 6, "model": [6, 7], "train": [6, 7], "preprocess": 6, "spatial_integr": [3, 4, 6], "spatial_map": [3, 4, 6], "train_model": 6, "util": 6, "content": 6, "check": [], "usag": [], "section": [], "further": [], "inform": [], "instal": 3, "To": [0, 4], "us": [0, 4], "lumach": 4, "first": 4, "pip": 4, "venv": [], "spatial": [], "integr": [], "map": [], "fusemap": [0, 4], "retriev": 4, "random": 4, "ingredi": 4, "you": [0, 4], "can": [0, 4], "get_random_ingredi": 4, "kind": 4, "string": 4, "str": 4, "option": 4, "The": 4, "type": 4, "spatialintegr": 3, "spatialmap": 3, "report": 0, "issu": 0, "our": 0, "github": 0, "tracker": 0, "yichun": 0, "he": 0, "public": 0, "pleas": 0, "xx": 0, "biorxiv": 0, "overview": 3, "tutori": 3, "about": 3, "support": 3, "author": 3, "how": 3, "cite": 3, "xxx": 3, "fusmap": 3, "provid": 3, "ar": 7, "under": 7, "construct": 7, "A": 7, "come": 7, "soon": 7, "tm": 7}, "objects": {"": [[2, 0, 0, "-", "fusemap"], [5, 0, 0, "-", "main"]], "fusemap": [[2, 0, 0, "-", "config"], [2, 0, 0, "-", "dataset"], [2, 0, 0, "-", "logger"], [2, 0, 0, "-", "loss"], [2, 0, 0, "-", "model"], [2, 0, 0, "-", "preprocess"], [2, 0, 0, "-", "spatial_integrate"], [2, 0, 0, "-", "spatial_map"], [2, 0, 0, "-", "train"], [2, 0, 0, "-", "train_model"], [2, 0, 0, "-", "utils"]], "fusemap.config": [[2, 1, 1, "", "FlagConfig"], [2, 1, 1, "", "ModelType"], [2, 3, 1, "", "parse_input_args"]], "fusemap.config.FlagConfig": [[2, 2, 1, "", "align_anneal"], [2, 2, 1, "", "lambda_disc_single"]], "fusemap.config.ModelType": [[2, 2, 1, "", "DIS_LAMDA"], [2, 2, 1, "", "EPS"], [2, 2, 1, "", "TRAIN_WITHOUT_EVAL"], [2, 2, 1, "", "USE_REFERENCE_PCT"], [2, 2, 1, "", "align_noise_coef"], [2, 2, 1, "", "batch_size"], [2, 2, 1, "", "dropout_rate"], [2, 2, 1, "", "hidden_dim"], [2, 2, 1, "", "lambda_ae_single"], [2, 2, 1, "", "lambda_ae_spatial"], [2, 2, 1, "", "lambda_disc_spatial"], [2, 2, 1, "", "latent_dim"], [2, 2, 1, "", "learning_rate"], [2, 2, 1, "", "lr_factor_final"], [2, 2, 1, "", "lr_factor_pretrain"], [2, 2, 1, "", "lr_limit_final"], [2, 2, 1, "", "lr_limit_pretrain"], [2, 2, 1, "", "lr_patience_final"], [2, 2, 1, "", "lr_patience_pretrain"], [2, 2, 1, "", "n_epochs"], [2, 2, 1, "", "optim_kw"], [2, 2, 1, "", "patience_limit_final"], [2, 2, 1, "", "patience_limit_pretrain"], [2, 2, 1, "", "pca_dim"], [2, 2, 1, "", "use_input"], [2, 2, 1, "", "verbose"]], "fusemap.dataset": [[2, 1, 1, "", "CustomGraphDataLoader"], [2, 1, 1, "", "CustomGraphDataset"], [2, 1, 1, "", "MapPretrainDataLoader"], [2, 1, 1, "", "MapPretrainDataset"], [2, 3, 1, "", "construct_data"], [2, 3, 1, "", "construct_mask"], [2, 3, 1, "", "get_feature_sparse"]], "fusemap.logger": [[2, 1, 1, "", "MultipleHeaderFilter"], [2, 3, 1, "", "setup_logging"]], "fusemap.logger.MultipleHeaderFilter": [[2, 4, 1, "", "filter"]], "fusemap.loss": [[2, 3, 1, "", "AE_Gene_loss"], [2, 3, 1, "", "compute_ae_loss"], [2, 3, 1, "", "compute_ae_loss_map"], [2, 3, 1, "", "compute_ae_loss_pretrain"], [2, 3, 1, "", "compute_dis_loss"], [2, 3, 1, "", "compute_dis_loss_map"], [2, 3, 1, "", "compute_dis_loss_pretrain"], [2, 3, 1, "", "compute_gene_embedding_loss"], [2, 3, 1, "", "get_balance_weight"], [2, 3, 1, "", "get_balance_weight_subsample"], [2, 3, 1, "", "prod"]], "fusemap.model": [[2, 1, 1, "", "Adj_model"], [2, 1, 1, "", "Discriminator"], [2, 1, 1, "", "FuseMapAdaptDecoder"], [2, 1, 1, "", "FuseMapDecoder"], [2, 1, 1, "", "FuseMapEncoder"], [2, 1, 1, "", "Fuse_network"], [2, 1, 1, "", "NNTransfer"], [2, 3, 1, "", "reset_parameters"]], "fusemap.model.Adj_model": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.model.Discriminator": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.model.FuseMapAdaptDecoder": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.model.FuseMapDecoder": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.model.FuseMapEncoder": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.model.Fuse_network": [[2, 4, 1, "", "add_adaptdecoder_module"], [2, 4, 1, "", "add_decoder_module"], [2, 4, 1, "", "add_encoder_module"], [2, 2, 1, "", "training"]], "fusemap.model.NNTransfer": [[2, 4, 1, "", "forward"], [2, 2, 1, "", "training"]], "fusemap.preprocess": [[2, 3, 1, "", "construct_graph"], [2, 3, 1, "", "get_allunique_gene_names"], [2, 3, 1, "", "get_spatial_input"], [2, 3, 1, "", "get_unique_gene_indices"], [2, 3, 1, "", "preprocess_adata"], [2, 3, 1, "", "preprocess_adj_sparse"], [2, 3, 1, "", "preprocess_raw"]], "fusemap.spatial_integrate": [[2, 3, 1, "", "spatial_integrate"]], "fusemap.spatial_map": [[2, 3, 1, "", "spatial_map"]], "fusemap.train": [[2, 3, 1, "", "train"]], "fusemap.train_model": [[2, 3, 1, "", "add_pretrain_to_name"], [2, 3, 1, "", "balance_weight"], [2, 3, 1, "", "get_data"], [2, 3, 1, "", "load_ref_data"], [2, 3, 1, "", "load_ref_model"], [2, 3, 1, "", "map_model"], [2, 3, 1, "", "pretrain_model"], [2, 3, 1, "", "read_model"], [2, 3, 1, "", "train_model"], [2, 3, 1, "", "transfer_weight"]], "fusemap.utils": [[2, 3, 1, "", "average_embeddings"], [2, 3, 1, "", "generate_ad_embed"], [2, 3, 1, "", "load_snapshot"], [2, 3, 1, "", "read_cell_embedding"], [2, 3, 1, "", "read_gene_embedding"], [2, 3, 1, "", "read_gene_embedding_map"], [2, 3, 1, "", "save_obj"], [2, 3, 1, "", "save_snapshot"], [2, 3, 1, "", "seed_all"], [2, 3, 1, "", "transfer_annotation"]], "lumache": [[4, 3, 1, "id0", "get_random_ingredients"]], "main": [[5, 3, 1, "", "main"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:attribute", "3": "py:function", "4": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "attribute", "Python attribute"], "3": ["py", "function", "Python function"], "4": ["py", "method", "Python method"]}, "titleterms": {"fusemap": [2, 3, 6], "packag": 2, "submodul": 2, "config": 2, "modul": [2, 5], "dataset": 2, "logger": 2, "loss": 2, "model": 2, "preprocess": 2, "spatial_integr": 2, "spatial_map": 2, "train": 2, "train_model": 2, "util": 2, "content": [2, 3], "welcom": 3, "": 3, "document": 3, "indic": 3, "tabl": [], "main": 5, "usag": [3, 4], "instal": 4, "spatial": 3, "integr": 3, "map": 3, "spatialintegr": 4, "spatialmap": 4, "about": 0, "support": 0, "author": 0, "how": 0, "cite": 0, "transcripom": 3, "univers": 3, "gene": 3, "cell": 3, "tissu": 3, "embed": 3, "tutori": 7}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"fusemap package": [[2, "fusemap-package"]], "Submodules": [[2, "submodules"]], "fusemap.config module": [[2, "module-fusemap.config"]], "fusemap.dataset module": [[2, "module-fusemap.dataset"]], "fusemap.logger module": [[2, "module-fusemap.logger"]], "fusemap.loss module": [[2, "module-fusemap.loss"]], "fusemap.model module": [[2, "module-fusemap.model"]], "fusemap.preprocess module": [[2, "module-fusemap.preprocess"]], "fusemap.spatial_integrate module": [[2, "module-fusemap.spatial_integrate"]], "fusemap.spatial_map module": [[2, "module-fusemap.spatial_map"]], "fusemap.train module": [[2, "module-fusemap.train"]], "fusemap.train_model module": [[2, "module-fusemap.train_model"]], "fusemap.utils module": [[2, "module-fusemap.utils"]], "Module contents": [[2, "module-fusemap"]], "main module": [[5, "module-main"]], "FuseMap": [[6, "fusemap"]], "About": [[0, "about"]], "Support": [[0, "support"]], "Authors": [[0, "authors"]], "How to Cite": [[0, "how-to-cite"]], "Usage": [[4, "usage"], [3, "usage"]], "Installation": [[4, "installation"]], "SpatialIntegration": [[4, "spatialintegration"]], "SpatialMapping": [[4, "spatialmapping"]], "Tutorials": [[7, "tutorials"]], "Welcome to FuseMap\u2019s documentation!": [[3, "welcome-to-fusemap-s-documentation"]], "Contents:": [[3, null]], "FuseMap: spatial transcripomics integration with universal gene, cell, and tissue embeddings.": [[3, "fusemap-spatial-transcripomics-integration-with-universal-gene-cell-and-tissue-embeddings"]], "Spatial integration": [[3, "spatial-integration"]], "Spatial mapping": [[3, "spatial-mapping"]], "Indices": [[3, "indices"]]}, "indexentries": {}})